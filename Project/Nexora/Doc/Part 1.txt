ğŸ‘‰ 1. Start with definitions
--- Authentication is the process of verifying the identity of a user (ex: username & password, OTP, JWT token).
--- Authorization is the process of checking what resources or actions the authenticated user is allowed to access (ex: admin can add users, normal user cannot).

ğŸ‘‰ 2. Give real-world example
--- Authentication â†’ Logging into Gmail with email & password.
--- Authorization â†’ After login, only you can see your mails, not othersâ€™.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
--- Django â†’ the web framework (core).
--- DRF â†’ builds APIs on top of Django.
--- simplejwt â†’ Its a package adds secure JWT authentication for those APIs.
--- PyMySQL â†’ connects Django to a MySQL database.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
JWT:

--- JWT stands for JSON Web Token.
--- Itâ€™s a compact, self-contained token used for authentication between client and server.
--- It has three parts â€” header, payload, and signature.
--- After login, the server issues a JWT, and the client sends it with each request.
(ğŸ‘‰ "User login à®†à®© à®ªà®¿à®±à®•à¯, server à®’à®°à¯ JWT token à®•à¯à®Ÿà¯à®•à¯à®•à¯à®®à¯. à®…à®¤à¯à®•à¯à®•à¯à®ªà¯ à®ªà®¿à®±à®•à¯, client à®’à®µà¯à®µà¯Šà®°à¯ request à®…à®©à¯à®ªà¯à®ªà¯à®®à¯ à®ªà¯‹à®¤à¯à®®à¯ à®…à®¨à¯à®¤ JWT token-à® à®šà¯‡à®°à¯à®¤à¯à®¤à¯ server-à®•à¯à®•à¯ à®…à®©à¯à®ªà¯à®ªà¯à®®à¯.")
--- Since it is stateless, the server doesnâ€™t need to store sessions, which makes it scalable and fast.

âœ… (If they want more)
--- The header defines algorithm, payload has user info and expiry, and the signature ensures the token is not tampered.

âœ… What is the meaning of compact in coding?
--- In coding, compact means writing code or data in a shorter, claener and memory-efficent way.

âœ… What is the meaning of self-contained token in coding?
--- A self-contained token is a token(like a JWT) that holds all the required user information inside itself,
--- so the server doesn't need to look it up in a database.

âœ… What is the meaning of stateless in coding?
--- Statelessn in coding means the server does not remember any information about the client between request.
--- each request is independent.

âœ… What is the meaning of session in coding?
--- A session is a way to store user data on the server(like login info) so it can be used accross multiple requests.

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ğŸ‘‰ Structure:
xxxxx.yyyyy.zzzzz â†’ Header.Payload.Signature

--- Header â†’ algorithm & token type (ex: HS256).
--- Payload â†’ user info + claims (ex: user id, role, expiry time).
--- Signature â†’ ensures token is not tampered (generated using secret key).

ğŸ”¹ Important

--- Header and Payload in JWT are Base64-encoded JSON.
--- Signature is also Base64-encoded, but itâ€™s generated using hashing + secret key.
--- Anyone can decode Header & Payload, but only the server (with secret key) can verify Signature.

ğŸ‘‰ In short:

--- Header + Payload = message
--- Signature = seal ğŸ”’ with serverâ€™s secret key
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
ğŸ”¹ Q: â€œWhat is Base64 and why does JWT use it?â€

--- Base64 is an encoding scheme that converts data into a text format using only Aâ€“Z, aâ€“z, 0â€“9, +, /.
--- Itâ€™s not encryption, just a safe way to represent data in text.
--- JWT uses Base64 to encode the header and payload so they can be safely sent in HTTP headers.

âœ… (If they dig deeper)
--- Anyone can decode Base64, but the signature ensures the JWT cannot be tampered with.

âš¡ Quick analogy:
--- Base64 = Writing something in English â†’ but instead of letters, you map it into a fixed alphabet system â†’ machine-readable.
--- Not secret, just transport-friendly.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
1. CREATE DATABASE nexora CHARACTER SET utf8mb4;

--- What it does: Creates a new database named nexora.
--- CHARACTER SET utf8mb4:
--- Tells MySQL to use the utf8mb4 encoding, which is the modern and recommended choice.
--- It supports all Unicode characters, including emojis (ğŸ˜€ğŸ”¥ğŸ’¯), unlike utf8 which is limited.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

2. CREATE USER 'nexora_user'@'%' IDENTIFIED BY 'StrongPassword123!';

--- What it does: Creates a new database user called nexora_user.
--- '%': The % means this user can connect from any host (not just localhost).
--- If you only want local access, youâ€™d use 'nexora_user'@'localhost'.
--- IDENTIFIED BY 'StrongPassword123!': Sets the userâ€™s password to StrongPassword123!.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

3. GRANT ALL PRIVILEGES ON nexora.* TO 'nexora_user'@'%';

--- What it does: Gives the user all permissions (create tables, insert, update, delete, etc.) on the nexora database.
--- nexora.*: Means "all tables inside the nexora database".
--- To 'nexora_user'@'%': Grants those rights specifically to the user you just created.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

4. FLUSH PRIVILEGES;

--- What it does: Refreshes MySQLâ€™s memory of users and privileges.
--- Without this, MySQL might not immediately recognize the new user/permissions until restart.
--- Think of it as "apply the changes now".
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

In Database connect in Django (settings.py):

--- 'OPTIONS': { 'init_command': "SET sql_mode='STRICT_TRANS_TABLES'", }
--- OPTIONS â†’ Django oda DB connection-ku extra config.
--- init_command â†’ Connection aana udane oru SQL command run panna.
--- STRICT_TRANS_TABLES â†’ Safe mode ahh enable pannidum â†’ invalid data DB la sneak in aagave koodadhu.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

JWT tokens:

--- Access token valid for 60 minutes.
--- Refresh token valid for 7 days.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

1) class User(AbstractUser):

--- AbstractUser = Django oda built-in User (username, email, password irukkum).
--- Neenga extend pannitu extra fields add pannuringa (role, phone, address).
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

2) class Roles(models.TextChoices):

--- Idhu oru enum (options list).
--- ADMIN = 'ADMIN', 'Admin' â†’
--- 'ADMIN' DB la save aagum.
--- 'Admin' UI la kaattum.
--- So, role oda possible values = ADMIN, SELLER, CUSTOMER.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
3) role = models.CharField(...)

--- Role nu oru field create pannuringa.
--- choices=Roles.choices â†’ dropdown maari 3 option mattum select panna mudiyum.
--- default=Roles.CUSTOMER â†’ pudhusaa user create pannumbodhu role = Customer automatically set aagum.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

@admin.register(User)
class UserAdmin(DjangoUserAdmin):

--- @admin.register(User) = admin.site.register(User, UserAdmin) shortcut.
--- UserAdmin inherits DjangoUserAdmin, so default user admin behaviour keep pannittu namma changes add pannalam.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

Imports & setup:

from django.contrib.auth import get_user_model
from django.contrib.auth.password_validation import validate_password
from rest_framework import serializers

User = get_user_model()

--- get_user_model() â†’ neenga define pannirukkura custom User model-a fetch pannum (hard-coded import avoid agum).
--- validate_password â†’ Django built-in password strength checks (length, common password, etc.).
--- DRF serializers â†’ JSON <-> Python conversion + validation.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

RegisterSerializer:

class RegisterSerializer(serializers.ModelSerializer):
    password = serializers.CharField(write_only=True, required=True)
    role = serializers.ChoiceField(choices=User.Roles.choices, default=User.Roles.CUSTOMER)

--- ModelSerializer â†’ auto fields + model-based save.
--- password â†’ write_only=True â†’ response la varadhu (safety).
--- required=True â†’ must send during register.
--- role â†’ ChoiceField â†’ ADMIN/SELLER/CUSTOMER mattum allow.
--- default=CUSTOMER â†’ user specify pannalana default-aa Customer.
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

ğŸ“Œ Error summary:

RuntimeError: 'cryptography' package is required for sha256_password or caching_sha2_password auth methods
Cause:

--- Your MySQL server user (nexora_user) is using the default authentication plugin caching_sha2_password.
--- But your Python MySQL driver (PyMySQL) cannot handle it without the cryptography package.

âœ… Solution (two options)
Option 1: Install cryptography

--- In your venv, run:

pip install cryptography

--- Then try again:

python manage.py makemigrations
python manage.py migrate
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~